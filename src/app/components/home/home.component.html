<div class="header">
    <h2>WeChat</h2>
    <div class="header-right">
      <i class="pi pi-user" (click)="navigateToProfile()" style="font-size: 1.5rem"></i>
      <i class="pi pi pi-cog" style="font-size: 1.5rem"></i>
    </div>
    
</div>
<p-button (click)="showDialog()" icon="pi pi-plus" [rounded]="true" [style]="{ width: '4rem', height: '4rem' }" class="fab-btn" variant="outlined" severity="success" />

<p-listbox
  [options]="chats"
  [(ngModel)]="selectedChat"
  optionLabel="name"
  styleClass="chat-list"
  [filter]="true"
  [listStyle]="{ maxHeight: '100vh' }"
>
  <ng-template let-chat pTemplate="item">
    <div class="chat-item" (click) = "navigateToChat(chat.id)">
      <div class="chat-main">
        <p-avatar
        [image]="getAvatarUrl(chat.name)"
        shape="circle"
        size="large"
        ></p-avatar>
        <div class="chat-info">
          <span class="chat-name">{{ chat.name }}</span>
          <small class="chat-last">{{ chat.lastMessage }}</small>
        </div>
        </div>

      <div class="chat-meta">
        <small>{{ chat.updatedAt | date:'shortTime' }}</small>
      </div>
    </div>
  </ng-template>
</p-listbox>

<!--DIALOG-->
<p-dialog header="New Chat" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem', height: '35vh' }">
    <p-floatlabel variant="in">
        <input pInputText id="newChatName" [(ngModel)]="newChatName" autocomplete="off" />
        <label for="newChatName">Room name</label>
    </p-floatlabel>
    <br><br>
    <div class="type-container">
      <span>Room type :</span>
      <div class="flex items-center">
          <p-radiobutton name="type" value="GROUP" [(ngModel)]="newRoom_type" inputId="type1" />
          <label for="type1" class="ml-2">Group</label>
      </div>

      <div class="flex items-center">
          <p-radiobutton name="type" value="PRIVATE" [(ngModel)]="newRoom_type" inputId="type2" />
          <label for="type2" class="ml-2">Private</label>
      </div>
    </div>
    <br><br>
    <div class="flex justify-end gap-2">
        <p-button label="Cancel" severity="secondary" (click)="visible = false" />
        <p-button label="Save" (click)="createRoom()" />
    </div>
</p-dialog>